---
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';
import CaseStudyCard from '../../components/CaseStudyCard.astro';
import { breadcrumbJsonLd } from '../../lib/seo';

const caseStudies = (await getCollection('case-studies')).sort(
  (a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime()
);

const structuredData = [
  breadcrumbJsonLd([{ name: 'Work', path: '/work' }])
];
---

<BaseLayout
  lang="es"
  title="Casos técnicos | STAR y entrega verificable"
  description="Casos técnicos enfocados en performance, SEO, accesibilidad y automatización. Estructura STAR: situación, tarea, acción, resultado."
  canonicalPath="/work"
  alternates={[{ lang: 'en', path: '/en/work' }]}
  structuredData={structuredData}
>
  <section class="section-shell mx-auto max-w-6xl px-4 py-12 md:px-6">
    <p class="text-xs uppercase tracking-[0.2em] text-accent">Work</p>
    <h1 class="mt-2 text-3xl font-semibold text-foreground">Casos técnicos (STAR)</h1>
    <p class="mt-3 max-w-3xl text-muted">
      Selección de proyectos con foco en performance, SEO técnico, accesibilidad y automatización. Resultados detallados disponibles bajo solicitud cuando son confidenciales.
    </p>
    <div class="section-divider"></div>
    <div class="mt-4 grid gap-4 md:grid-cols-2">
      {caseStudies.map((study) => (
        <CaseStudyCard study={study} />
      ))}
    </div>
  </section>
</BaseLayout>
